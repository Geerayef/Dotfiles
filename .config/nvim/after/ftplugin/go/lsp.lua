vim.opt.tabstop = 4
vim.opt.shiftwidth = 4

local gopls = {
  name = "Go PLS",
  cmd = { "gopls", "serve" },
  on_attach = LSP.attach,
  filetypes = { "go", "gomod", "gowork", "gotmpl" },
  root_markers = { "*.go", "main.go", "go.mod", "go.work", "go.sum" },
  settings = {
    gopls = {
      usePlaceholders = true,
      analyses = {
        unreachable = true,
        appendclipped = true,
        slicesdelete = true,
        QF1001 = true,
        QF1005 = true,
        QF1006 = true,
        QF1007 = true,
        QF1011 = true,
        S1002 = true,
        S1005 = true,
        S1006 = true,
        S1008 = true,
        S1016 = true,
        S1021 = true,
        S1025 = true,
        S1029 = true,
        SA1000 = true,
        SA1003 = true,
        SA1007 = true,
        SA1010 = true,
        SA1011 = true,
        SA1014 = true,
        SA1017 = true,
        SA1018 = true,
        SA1020 = true,
        SA1024 = true,
        SA1026 = true,
        SA1028 = true,
        SA1031 = true,
        SA1032 = true,
        SA4006 = true,
        SA4009 = true,
        SA4010 = true,
        SA4012 = true,
        SA4015 = true,
        SA4017 = true,
        SA4018 = true,
        SA4031 = true,
        SA5000 = true,
        SA5010 = true,
        SA5012 = true,
        SA6000 = true,
        SA6001 = true,
        SA6003 = true,
        SA9001 = true,
        SA9003 = true,
        SA9005 = true,
        SA9007 = true,
        SA9008 = true,
        ST1005 = true,
        ST1008 = true,
        ST1012 = true,
        ST1013 = true,
        ST1015 = true,
        ST1017 = true,
        ST1023 = true,
      },
    },
  },
}

vim.schedule(function()
  vim.api.nvim_win_call(
    vim.api.nvim_get_current_win(),
    function() LSP.start(gopls) end
  )
end)
