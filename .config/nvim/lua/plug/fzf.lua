return {
  "ibhagwan/fzf-lua",
  cmd = "FzfLua",
  opts = {
    { "max-perf", "telescope" },
    fzf_opts = { ["--layout"] = "reverse", ["--marker"] = false },
    defaults = { compat_warn = false, no_header = true, no_header_i = true },
    winopts = {
      header = false,
      height = 0.4,
      width = 0.8,
      row = 0.5,
      col = 0.5,
      border = S.Border,
      treesitter = { enabled = true },
      backdrop = 100,
      preview = {
        -- default = "bat",
        border = "noborder",
        wrap = "nowrap",
        hidden = "hidden",
        vertical = "down:50%",
        horizontal = "right:50%",
        layout = "horizontal",
        scrollbar = false,
        scrolloff = "-2",
        scrollchars = { "", "" },
      },
    },
    keymap = {
      builtin = {
        ["<M-Esc>"] = "hide",
        ["<F1>"] = "toggle-help",
        ["<F2>"] = "toggle-preview-wrap",
        ["<M-p>"] = "toggle-preview",
      },
      fzf = {
        true,
        ["ctrl-z"] = "abort",
        ["ctrl-u"] = "unix-line-discard",
        ["ctrl-f"] = "preview-page-down",
        ["ctrl-b"] = "preview-page-up",
        ["ctrl-a"] = "beginning-of-line",
        ["ctrl-e"] = "end-of-line",
        ["alt-a"] = "toggle-all",
        ["alt-g"] = "first",
        ["alt-G"] = "last",
        ["alt-p"] = "toggle-preview",
      },
    },
    files = { winopts = { width = 0.4 } },
    oldfiles = { winopts = { title = " Old files ", width = 0.4 } },
    buffers = { winopts = { width = 0.4 } },
    helptags = {
      winopts = { width = 1.0, height = 0.75, row = 1.0, col = 0.0 },
    },
  },
}
